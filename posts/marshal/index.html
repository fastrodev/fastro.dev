<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Marshal | Fastro</title>
<meta name=keywords content="go,mongo">
<meta name=description content="Memahami marshal dan unmarshal di golang dan cara menggunakannya di mongodb">
<meta name=author content="Admin">
<link rel=canonical href=https://fastro.dev/posts/marshal/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c636b3fb9ee6fb2a9fee5661a00ee6ee61a00fb110a4d91667476b2e776bf63f.css integrity="sha256-xjaz+57m+yqf7lZhoA7m7mGgD7EQpNkWZ0drLndr9j8=" rel="preload stylesheet" as=style>
<link rel=preload href=https://gist.githubusercontent.com/ynwd/cbbb39732a409bb4c742c229a887a9ac/raw/d78388ae7a5fbb29ad56998d0f444919d2f0b44f/logo.svg as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://fastro.dev/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://fastro.dev/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://fastro.dev/favicon-32x32.png>
<link rel=apple-touch-icon href=https://fastro.dev/apple-touch-icon.png>
<link rel=mask-icon href=https://fastro.dev/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.0">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-165990288-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="Marshal">
<meta property="og:description" content="Memahami marshal dan unmarshal di golang dan cara menggunakannya di mongodb">
<meta property="og:type" content="article">
<meta property="og:url" content="https://fastro.dev/posts/marshal/"><meta property="og:image" content="https://fastro.dev/seo.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-12-23T00:00:00+00:00">
<meta property="article:modified_time" content="2021-12-23T00:00:00+00:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://fastro.dev/seo.png">
<meta name=twitter:title content="Marshal">
<meta name=twitter:description content="Memahami marshal dan unmarshal di golang dan cara menggunakannya di mongodb">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://fastro.dev/posts/"},{"@type":"ListItem","position":3,"name":"Marshal","item":"https://fastro.dev/posts/marshal/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Marshal","name":"Marshal","description":"Memahami marshal dan unmarshal di golang dan cara menggunakannya di mongodb","keywords":["go","mongo"],"articleBody":"Marshal dan Unmarshal sering dipakai untuk mengolah data di golang. Catatan ini berisi penjelasan se-simple mungkin tentang marshal-unmarshal dan cara menggunakannya di mongodb.\nPendahuluan Pada catatan sebelumnya kita telah membuat crud. Kalau kita jalankan hasilnya, return dari method readBook masih seperti ini:\n\u0026{ 0xc00040e180 [] 0xc00013abd0} Karena return valuenya masih berupa pointer, yang tampil adalah alamat memori data itu berada.\nYang jadi pertanyaan: bagaimana cara kita menampilkan data yang lebih bisa dibaca (readable)?\nUbah signature Format return value yang menurut kita ideal adalah struct. Karena dengan struct, akan dengan mudah diubah ke format lain.\nfunc (r *repository) readBook(id interface{}) (*Book, error) { return nil, nil } Perhatikan, return valuenya berupa pointer struct agar yang diakses nanti adalah alamatnya.\nTambahkan query dan decode Kita tambahkan method Decode yang akan menyimpan hasilnya di variabel result.\nIngat, variabel ini bertipe bson.D agar bisa kita proses dengan fungsi Marshal.\nfunc (r *repository) readBook(id interface{}) (*Book, error) { filter := bson.M{\"_id\": id} var result bson.D err := r.coll.FindOne(context.TODO(), filter).Decode(\u0026result) if err != nil { return nil, err } fmt.Println(result) return nil, nil } Ada juga fungsi Println untuk menampilkan hasil method Decode. Jika kita jalankan, hasilnya kurang lebih seperti ini:\n[{_id ObjectID(\"61c3b3e004b93f7df512035c\")} {title Invisible Cities} {author Italo Calvino} {year_published 1974}] Marshal Variabel result masih berbentuk bson. Sudah bisa dibaca, sih. Tapi formatnya masih belum sesuai dengan signature yang sudah kita tentukan.\nMarshal, berguna banget untuk mengubah result menjadi data yang bertipe byte[]. Tipe data terakhir inilah yang nantinya bisa diubah lagi menjadi struct.\nfunc (r *repository) readBook(id interface{}) (*Book, error) { filter := bson.M{\"_id\": id} var result bson.D err := r.coll.FindOne(context.TODO(), filter).Decode(\u0026result) if err != nil { return nil, err } docByte, err := bson.Marshal(result) if err != nil { return nil, err } fmt.Println(docByte) return nil, nil } Jika kita jalankan, docByte akan tampil seperti ini:\n[100 0 0 0 7 95 105 100 0 97 195 183 184 108 56 136 31 173 218 187 131 2 116 105 116 108 101 0 13 0 0 0 66 117 109 105 32 109 97 110 117 115 105 97 0 2 97 117 116 104 111 114 0 22 0 0 0 80 114 97 109 111 101 100 121 97 32 65 110 97 110 116 97 32 84 111 101 114 0 16 121 101 97 114 95 112 117 98 108 105 115 104 101 100 0 188 7 0 0 0] Unmarshal Setelah menjadi []byte, variabel docByte akan kita ubah menjadi struct. Fungsi yang berguna untuk tujuan itu adalah Unmarshal.\nfunc (r *repository) readBook(id interface{}) (*Book, error) { filter := bson.M{\"_id\": id} var result bson.D err := r.coll.FindOne(context.TODO(), filter).Decode(\u0026result) if err != nil { return nil, err } docByte, err := bson.Marshal(result) if err != nil { return nil, err } var book Book err = bson.Unmarshal(docByte, \u0026book) if err != nil { return nil, err } fmt.Println(book) return \u0026book, nil } Kalau kita jalankan, fungsi Println di atas hasilnya akan seperti ini:\n{ObjectID(\"61c3b92981219573cfb48119\") Invisible Cities Italo Calvino 1974} Cara pemakaian Setelah signature telah kita ganti, cara pemakaian repository di fungsi main perlu kita sesuaikan.\nfunc main() { uri := \"mongodb+srv://admin:admin@cluster0.xtwwu.mongodb.net\" database := \"myDB\" collection := \"favorite_books\" repo := createBookRepository(uri, database, collection) result, err := repo.createBook(Book{ Title: \"Invisible Cities\", Author: \"Italo Calvino\", Year: 1974, }) if err != nil { panic(err) } fmt.Printf(\"Inserted document with _id: %v\\n\", result.ID) book, err := repo.readBook(result.ID) if err != nil { panic(err) } fmt.Printf(\"%v\\n\", *book) } Kode selengkapnya: lihat di sini\nKalau kita jalankan, hasilnya jadi seperti ini:\nInserted document with _id: ObjectID(\"61c3da9bf49dd8380bb17ca0\") {ObjectID(\"61c3da9bf49dd8380bb17ca0\") Invisible Cities Italo Calvino 1974} ","wordCount":"596","inLanguage":"en","datePublished":"2021-12-23T00:00:00Z","dateModified":"2021-12-23T00:00:00Z","author":{"@type":"Person","name":"Admin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://fastro.dev/posts/marshal/"},"publisher":{"@type":"Organization","name":"Fastro","logo":{"@type":"ImageObject","url":"https://fastro.dev/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class="main-header header">
<nav class=nav>
<div class=logo>
<a href=https://fastro.dev accesskey=h title="Fastro (Alt + H)">
<img src=https://gist.githubusercontent.com/ynwd/cbbb39732a409bb4c742c229a887a9ac/raw/d78388ae7a5fbb29ad56998d0f444919d2f0b44f/logo.svg alt=logo aria-label=logo height=28>Fastro</a>
</div>
<ul id=menu>
<li>
<a href=https://fastro.dev/archives title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://fastro.dev/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://fastro.dev/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://fastro.dev/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</li>
</ul>
</nav>
</header><main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://fastro.dev>Home</a>&nbsp;»&nbsp;<a href=https://fastro.dev/posts/>Posts</a></div>
<h1 class=post-title>
Marshal
</h1>
<div class=post-meta><span title="2021-12-23 00:00:00 +0000 UTC">December 23, 2021</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Admin&nbsp;|&nbsp;<a href=https://github.com/fastrodev/fastrodev.github.io/blob/main/content/posts/marshal.md rel="noopener noreferrer" target=_blank>Update</a>
</div>
</header> <div class=toc>
<details open>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#pendahuluan aria-label=Pendahuluan>Pendahuluan</a></li>
<li>
<a href=#ubah-signature aria-label="Ubah signature">Ubah signature</a></li>
<li>
<a href=#tambahkan-query-dan-decode aria-label="Tambahkan query dan decode">Tambahkan query dan decode</a></li>
<li>
<a href=#marshal aria-label=Marshal>Marshal</a></li>
<li>
<a href=#unmarshal aria-label=Unmarshal>Unmarshal</a></li>
<li>
<a href=#cara-pemakaian aria-label="Cara pemakaian">Cara pemakaian</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p><code>Marshal</code> dan <code>Unmarshal</code> sering dipakai untuk mengolah data di golang. Catatan ini berisi penjelasan se-<em>simple</em> mungkin tentang marshal-unmarshal dan cara menggunakannya di mongodb.</p>
<h3 id=pendahuluan>Pendahuluan<a hidden class=anchor aria-hidden=true href=#pendahuluan>#</a></h3>
<p>Pada <a href=/posts/repository>catatan sebelumnya</a> kita telah membuat crud. Kalau kita jalankan hasilnya, return dari method <a href=https://github.com/fastrodev/praktikum-repository/blob/2c985f11a3aa23d807b9693206f741dbfe3bb8aa/main.go#L36><code>readBook</code></a> masih seperti ini:</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>&amp;{&lt;nil&gt; 0xc00040e180 [] 0xc00013abd0}
</code></pre></div><p>Karena return valuenya masih berupa pointer, yang tampil adalah alamat memori data itu berada.</p>
<p>Yang jadi pertanyaan: bagaimana cara kita menampilkan data yang lebih bisa dibaca <em>(readable)</em>?</p>
<h3 id=ubah-signature>Ubah signature<a hidden class=anchor aria-hidden=true href=#ubah-signature>#</a></h3>
<p>Format return value yang menurut kita ideal adalah struct. Karena dengan struct, akan dengan mudah diubah ke format lain.</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#fff;font-weight:700>func</span> (r *repository) readBook(id <span style=color:#fff;font-weight:700>interface</span>{}) (*Book, <span style=color:#fff;font-weight:700>error</span>) {
    <span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, <span style=color:#fff;font-weight:700>nil</span>
}
</code></pre></div><p>Perhatikan, return valuenya berupa pointer struct agar yang diakses nanti adalah alamatnya.</p>
<h3 id=tambahkan-query-dan-decode>Tambahkan query dan decode<a hidden class=anchor aria-hidden=true href=#tambahkan-query-dan-decode>#</a></h3>
<p>Kita tambahkan method <code>Decode</code> yang akan menyimpan hasilnya di variabel <code>result</code>.</p>
<p>Ingat, variabel ini bertipe <code>bson.D</code> agar bisa kita proses dengan fungsi <code>Marshal</code>.</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#fff;font-weight:700>func</span> (r *repository) readBook(id <span style=color:#fff;font-weight:700>interface</span>{}) (*Book, <span style=color:#fff;font-weight:700>error</span>) {
    filter := bson.M{<span style=color:#0ff;font-weight:700>&#34;_id&#34;</span>: id}
	<span style=color:#fff;font-weight:700>var</span> result bson.D
	err := r.coll.FindOne(context.TODO(), filter).Decode(&amp;result)
	<span style=color:#fff;font-weight:700>if</span> err != <span style=color:#fff;font-weight:700>nil</span> {
		<span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, err
	}
    fmt.Println(result)
    <span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, <span style=color:#fff;font-weight:700>nil</span>
}
</code></pre></div><p>Ada juga fungsi <code>Println</code> untuk menampilkan hasil method <code>Decode</code>. Jika kita jalankan, hasilnya kurang lebih seperti ini:</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>[{_id ObjectID(&#34;61c3b3e004b93f7df512035c&#34;)} {title Invisible Cities} {author Italo Calvino} {year_published 1974}]
</code></pre></div><h3 id=marshal>Marshal<a hidden class=anchor aria-hidden=true href=#marshal>#</a></h3>
<p>Variabel <code>result</code> masih berbentuk bson. Sudah bisa dibaca, sih. Tapi formatnya masih belum sesuai dengan signature yang sudah kita tentukan.</p>
<p>Marshal, berguna <em>banget</em> untuk mengubah <code>result</code> menjadi data yang bertipe <code>byte[]</code>. Tipe data terakhir inilah yang nantinya bisa diubah lagi menjadi struct.</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#fff;font-weight:700>func</span> (r *repository) readBook(id <span style=color:#fff;font-weight:700>interface</span>{}) (*Book, <span style=color:#fff;font-weight:700>error</span>) {
    filter := bson.M{<span style=color:#0ff;font-weight:700>&#34;_id&#34;</span>: id}
	<span style=color:#fff;font-weight:700>var</span> result bson.D
	err := r.coll.FindOne(context.TODO(), filter).Decode(&amp;result)
	<span style=color:#fff;font-weight:700>if</span> err != <span style=color:#fff;font-weight:700>nil</span> {
		<span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, err
	}
    
    docByte, err := bson.Marshal(result)
	<span style=color:#fff;font-weight:700>if</span> err != <span style=color:#fff;font-weight:700>nil</span> {
		<span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, err
	}

    fmt.Println(docByte)
    
    <span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, <span style=color:#fff;font-weight:700>nil</span>
}
</code></pre></div><p>Jika kita jalankan, <code>docByte</code> akan tampil seperti ini:</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>[100 0 0 0 7 95 105 100 0 97 195 183 184 108 56 136 31 173 218 187 131 2 116 105 116 108 101 0 13 0 0 0 66 117 109 105 32 109 97 110 117 115 105 97 0 2 97 117 116 104 111 114 0 22 0 0 0 80 114 97 109 111 101 100 121 97 32 65 110 97 110 116 97 32 84 111 101 114 0 16 121 101 97 114 95 112 117 98 108 105 115 104 101 100 0 188 7 0 0 0]
</code></pre></div><h3 id=unmarshal>Unmarshal<a hidden class=anchor aria-hidden=true href=#unmarshal>#</a></h3>
<p>Setelah menjadi <code>[]byte</code>, variabel <code>docByte</code> akan kita ubah menjadi struct. Fungsi yang berguna untuk tujuan itu adalah <code>Unmarshal</code>.</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#fff;font-weight:700>func</span> (r *repository) readBook(id <span style=color:#fff;font-weight:700>interface</span>{}) (*Book, <span style=color:#fff;font-weight:700>error</span>) {
	filter := bson.M{<span style=color:#0ff;font-weight:700>&#34;_id&#34;</span>: id}
	<span style=color:#fff;font-weight:700>var</span> result bson.D
	err := r.coll.FindOne(context.TODO(), filter).Decode(&amp;result)
	<span style=color:#fff;font-weight:700>if</span> err != <span style=color:#fff;font-weight:700>nil</span> {
		<span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, err
	}

	docByte, err := bson.Marshal(result)
	<span style=color:#fff;font-weight:700>if</span> err != <span style=color:#fff;font-weight:700>nil</span> {
		<span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, err
	}

	<span style=color:#fff;font-weight:700>var</span> book Book
	err = bson.Unmarshal(docByte, &amp;book)
	<span style=color:#fff;font-weight:700>if</span> err != <span style=color:#fff;font-weight:700>nil</span> {
		<span style=color:#fff;font-weight:700>return</span> <span style=color:#fff;font-weight:700>nil</span>, err
	}

    fmt.Println(book)

	<span style=color:#fff;font-weight:700>return</span> &amp;book, <span style=color:#fff;font-weight:700>nil</span>
}
</code></pre></div><p>Kalau kita jalankan, fungsi <code>Println</code> di atas hasilnya akan seperti ini:</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>{ObjectID(&#34;61c3b92981219573cfb48119&#34;) Invisible Cities Italo Calvino 1974}
</code></pre></div><h3 id=cara-pemakaian>Cara pemakaian<a hidden class=anchor aria-hidden=true href=#cara-pemakaian>#</a></h3>
<p>Setelah signature telah kita ganti, cara pemakaian repository di fungsi <code>main</code> perlu kita sesuaikan.</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#fff;font-weight:700>func</span> main() {
	uri := <span style=color:#0ff;font-weight:700>&#34;mongodb+srv://admin:admin@cluster0.xtwwu.mongodb.net&#34;</span>
	database := <span style=color:#0ff;font-weight:700>&#34;myDB&#34;</span>
	collection := <span style=color:#0ff;font-weight:700>&#34;favorite_books&#34;</span>
	repo := createBookRepository(uri, database, collection)

	result, err := repo.createBook(Book{
		Title:  <span style=color:#0ff;font-weight:700>&#34;Invisible Cities&#34;</span>,
		Author: <span style=color:#0ff;font-weight:700>&#34;Italo Calvino&#34;</span>,
		Year:   <span style=color:#ff0;font-weight:700>1974</span>,
	})
	<span style=color:#fff;font-weight:700>if</span> err != <span style=color:#fff;font-weight:700>nil</span> {
		<span style=color:#fff;font-weight:700>panic</span>(err)
	}
	fmt.Printf(<span style=color:#0ff;font-weight:700>&#34;Inserted document with _id: %v\n&#34;</span>, result.ID)

    book, err := repo.readBook(result.ID)
	<span style=color:#fff;font-weight:700>if</span> err != <span style=color:#fff;font-weight:700>nil</span> {
		<span style=color:#fff;font-weight:700>panic</span>(err)
	}
	fmt.Printf(<span style=color:#0ff;font-weight:700>&#34;%v\n&#34;</span>, *book)
}
</code></pre></div><p><em>Kode selengkapnya: <a href=https://github.com/fastrodev/praktikum-repository/blob/marshal/main.go>lihat di sini</a></em></p>
<p>Kalau kita jalankan, hasilnya jadi seperti ini:</p>
<div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>Inserted document with _id: ObjectID(&#34;61c3da9bf49dd8380bb17ca0&#34;)
{ObjectID(&#34;61c3da9bf49dd8380bb17ca0&#34;) Invisible Cities Italo Calvino 1974}
</code></pre></div>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://fastro.dev/tags/go/>go</a></li>
<li><a href=https://fastro.dev/tags/mongo/>mongo</a></li>
</ul>
<nav class=paginav>
<a class=next href=https://fastro.dev/posts/repository/>
<span class=title>Next Page »</span>
<br>
<span>Repository</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://fastro.dev>Fastro</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>